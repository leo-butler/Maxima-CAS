@c Language: Brazilian Portuguese, Encoding: iso-8859-1
@c /plotdf.texi/1.6/Tue Dec 26 07:17:12 2006//
@menu
* Introdu@value{cedilha}@~ao a plotdf::
* Defini@value{cedilha}@~oes para plotdf::
@end menu

@node Introdu@value{cedilha}@~ao a plotdf, Defini@value{cedilha}@~oes para plotdf, plotdf, plotdf
@section Introdu@value{cedilha}@~ao a plotdf

A fun@,{c}@~ao @code{plotdf} cria um gr@'afico do campo de dire@,{c}@~ao de uma
Equa@,{c}@~ao Diferencial Ordin@'aria (EDO) de primeira ordem ou um sistema de duas
EDO's de primeira ordem aut@^onomas.

Uma vez que esse @'e um apcote adicional, com o objetivo de us@'a-lo voc@^e deve primeiramente
cham@'a-lo com @code{load("plotdf")}. Voc@^e tamb@'em precisa do Xmaxima
instalado, mesmo que voc@^e execute o Maxima usando uma interface diferente.

Para montar um gr@'afico do campo de dire@,{c}@~ao de uma EDO simples, a EDO deve ser escrita na
forma:
@ifnottex
@example
       dy
       -- = F(x,y)
       dx
@end example
@end ifnottex
@tex
$${{dy}\over{dx}} = F(x,y)$$
@end tex

e a fun@,{c}@~ao @var{F} pode ser dada como um argumento para
@code{plotdf}. A vari@'avel independente est@'a sempre identificada como @var{x},
e a vari@'avel dependente como @var{y}. Essas duas vari@'aveis podem n@~ao
ter quaisquer valores atribu@'idos a elas.

Para montar o gr@'afico do campo de dire@,{c}@~ao de um conjunto de duas EDO's aut@^onomas, elas devem
ser escritas na forma
@ifnottex
@example
       dx             dy
       -- = G(x,y)    -- = F(x,y) 
       dt             dt
@end example
@end ifnottex
@tex
$${{dx}\over{dt}} = G(x,y) \qquad {{dy}\over{dt}} = F(x,y)$$
@end tex

e o argumento para @code{plotdf} pode ser uma lista com as duas
fun@,{c}@~oes @var{F} e @var{G}, em qualquer ordem.

Se somente uma EDO for fornecida, @code{plotdf} ir@'a admitir implicitamente
@code{x=t}, e @code{G(x,y)=1}, transformando a equa@,{c}@~ao n@~ao
aut@^onoma em um sistema de duas equa@,{c}@~oes aut@^onomas.

@node Defini@value{cedilha}@~oes para plotdf,  , Introdu@value{cedilha}@~ao a plotdf, plotdf
@section Defini@value{cedilha}@~oes para plotdf

@deffn {Fun@,{c}@~ao} plotdf (@var{dydx},...op@value{cedilha}@~oes...)
@deffnx {Fun@,{c}@~ao} plotdf (@code{[}@var{dxdt},@var{dydt}@code{]},...op@value{cedilha}@~oes...)

Mostra um campo de dire@,{c}@~ao em duas dimens@~oes @var{x} e @var{y}.

@var{dydx}, @var{dxdt} e @var{dydt} s@~ao express@~oes que dependem
de @var{x} e @var{y}. Adicionalmente para essas duas vari@'aveis, as
express@~oes podem tamb@'em depender de um conjunto de par@^ametros, com valores
num@'ericos fornecidos com os @code{par@^ametros} op@,{c}@~ao (a sintaxe de op@,{c}@~ao @'e
fornecida abaixo), ou com um intervalo de valores permitidos especificados por meio de uma
op@,{c}@~ao @var{sliders}.

Muitas outras op@value{cedilha}@~oes podem ser fornecidas dentro do comando, ou selecionadas no
menu. Curvas integrais podem ser obtidas por meio de um clique no gr@'afico, ou
com a op@,{c}@~ao @code{trajectory_at}. A dire@,{c}@~ao da integra@,{c}@~ao
pode ser controlada com a op@,{c}@~ao @code{direction}, que pode ter
valores de @emph{forward} (adiante), @emph{backward}(para tr@'as) or @emph{both} (ambos). O n@'umero de
passos de integra@,{c}@~ao @'e fornecido por meio de @code{nsteps} e o intervalo de tempo
entre eles @'e escolhido com a op@,{c}@~ao @code{tstep}. O m@'etodo de Adams
Moulton @'e usado para a integra@,{c}@~ao; @'e tamb@'em poss@'ivel alternar para um
m@'etodo adaptativo de Runge-Kutta de quarta ordem.

@b{Menu da janela do gr@'afico:}

O menu na janela do gr@'afico tem as seguintes op@value{cedilha}@~oes: @emph{Zoom}, ir@'a
modificar o comportamento do mouse de forma que seja permitido a voc@^e aproximar uma
regi@~ao do gr@'afico por meio de um clique nessa regi@~ao como o bot@~ao esquerdo. Cada clique pr@'oximo a um
ponto do gr@'afico amplia esse gr@'afico, mantendo o contro no ponto onde voc@^e
clicou. Mantendo a tecla @key{Shift} pressioada enquanto clica, afasta para a
amplia@,{c}@~ao anterior. Para continuar calculando trajet@'orias quando voc@^e clica
sobre um ponto, selecione @emph{Integrate} a partir do menu.

A op@,{c}@~ao @emph{Config} no menu pode ser usada para mudar a(s) EDO(s) em
uso e para v@'arias outras escolhas. Ap@'os as mudan@,{c}as de configura@,{c}@~ao serem feitas,
a op@,{c}@~ao do menu @emph{Replot} estar@'a selecionada, para ativar as novas
escolhas.  Se um par de coordenadas for fornecido em um campo
@emph{Trajectory at} na caixa de di@'alogo @emph{Config} do menu, e a
tecla @key{enter} fo pressionada, uma nova curva integral ser@'a mostrada,
adicionalmente com as outras j@'a mostradas. Quando @emph{Replot} est@'a selecionada, somente
a @'ultima curva integral fornecida ser@'a mostrada.

Mantendo o bot@~ao direito do mouse pressionado enquanto o cursor @'e movido, pode ser
usado para arrastar as laterais do gr@'afico para cima ou para baixo. Par@^ametros
adicionais tais como o n@'umero de passos, o valor inicial de @var{t}
e os centros de x e y e raios, podem ser escolhidos no menu Config.

Uma c@'opia do gr@'afico pode ser impressa para uma impressora Postscript, ou gravada como um
arquivo postscript, usando a op@,{c}@~ao @emph{Save} do menu. Para alternar entre
imprimir e gravar para um arquivo Postscript, @emph{Print Options} pode ser
selecionada na janela de di@'alogo de @emph{Config}. Ap@'os as escolhas na
janela de di@'alogo @emph{Save} serem fornecidas, "Save'' deve ser selecionada no primeiro
menu, para cirar o arquivo ou imprimir o gr@'afico.

@b{Op@,{c}@~oes de gr@'afico:}

O comando @code{plotdf} pode incluir muitos comandos, cada comando @'e
uma lista de dois ou mais itens.  O primeiro item @'e o nome da op@,{c}@~ao,
e o restante compreende o valor ou valores atribu@'idos @`a op@,{c}@~ao.

As op@value{cedilha}@~oesque s@~ao reconhecidas por @code{plotdf} s@~ao as seguintes:

@itemize @bullet
@item
@dfn{tstep} define o comprimento dos incrementos sobre a
vari@'avel independente @var{t}, usado para calcular uma curva integral. Se somente
uma express@~ao @var{dydx} for fornecida a @code{plotdf}, a vari@'avel
@var{x} ser@'a diretamente proporcional a @var{t}.
O valor padr@~ao @'e 0.1.

@item
@dfn{nsteps} define o n@'umero de passos de comprimento @code{tstep}
que ser@'a usando para a vari@'avel independente, para calcular uma curva
integral.
O valor padr@~ao @'e 100.

@item
@dfn{direction} define a dire@,{c}@~ao da vari@'avel
independente que ser@'a seguida para calcular uma curva integral. Poss@'iveis
valores s@~ao @code{forward}, para fazer a vari@'avel independente aumentar
@code{nsteps} vezes, com incrementos de @code{tstep}, @code{backward}, para
fazer a vari@'avel independente diminuir, ou @code{both} que ir@'a conduzir a
um curva integral que amplia @code{nsteps} adiante, e @code{nsteps}
para tr@'as. As palavras chave @code{right} e @code{left} podem ser usadas como
sinonimos para @code{forward} e @code{backward}.
O valor padr@~ao @'e @code{both}.

@item
@dfn{tinitial} define o valor inicial da vari@'avel @var{t} usada
para calcular curva integral. Uma vez que equa@,{c}@~oes diferenciais forem
aut@^onomas, aquela esxolha ir@'a aparecer somente no gr@'afico das curvas como
fun@,{c}@~oes de @var{t}. 
O valor padr@~ao @'e 0.

@item
@dfn{versus_t} @'e usado para criar uma segunda janela de gr@'afico, com um
gr@'afico de uma curva integral, como duas fun@,{c}@~oes @var{x}, @var{y}, da
vari@'avel independente @var{t}. Se para @code{versus_t} for atribu@'ido qualquer valor
diferente de 0, a segunda janela de gr@'afico ser@'a mostrada. A segunda
janela de gr@'afico inclui outro menu, semelhante ao menu da janela de gr@'afico
principal.
O valor padr@~ao @'e 0.

@item
@dfn{trajectory_at} define as coordenadas @var{xinitial} e
@var{yinitial} para o ponto de partida de uma curva integral.
A op@,{c}@~ao est@'a vazia por padr@~ao.

@item
@dfn{parameters} define uma lista de par@^ametros, e seus
valores num@'ericos, usados na defini@,{c}@~ao das equa@,{c}@~oes
diferenciais. O nome e valores dos par@^ametros devem ser fornecidos em uma
seq@"u@^encia de caracteres com uma seq@"u@^encia de pares  @code{nome=valor} separados por v@'irgula.

@item
@dfn{sliders} define uma lista de par@^ametros que ser@'a modificada
interativamente usando bot@~oes de deslizamento, e o intervalo de varia@,{c}@~ao desses
par@^ametros. Os nomes e intervalos dos par@^ametros devem ser fornecidos in a
seq@"u@^encia de caracteres com uma seq@"u@^encia de elementos  @code{name=min:max} separados por v@'irgula.

@item
@dfn{xfun} define uma seq@"u@^encia de caracteres com uma seq@"u@^encia de fun@,{c}@~oes separadas com
ponto e v@'irgula @var{x} para serem mostradas, no topo do campo de dire@,{c}@~ao.
Essas fun@,{c}@~oes ir@~ao ser passadas pelo Tcl e n@~ao pelo Maxima.

@item
@dfn{xradius} @'e metade do comprimento do intervalo dos valores que
ir@~ao ser mostrados na dire@,{c}@~ao x.
O valor padr@~ao @'e 10.

@item
@dfn{yradius} @'e metade do comprimento do intervalo dos valores que
ir@~ao ser mostrados na dire@,{c}@~ao y.
O valor padr@~ao @'e 10.

@item
@dfn{xcenter} @'e a coordenada x do ponto no centro do
gr@'afico.
O valor padr@~ao @'e 0.

@item
@dfn{ycenter} @'e a coordenada y do ponto no centro do
gr@'afico.
O valor padr@~ao @'e 0.

@item
@dfn{width} define a largura da janela do gr@'afico, em pixels.
O valor padr@~ao @'e 500.

@item
@dfn{height} define a altura da janela do gr@'afico, em pixels.
O valor padr@~ao @'e 500.
@end itemize

@b{Exemplos:}

NOTA: Dependendo da interface usada para executar o Maxima, as fun@,{c}@~oes que
usam @code{openmath}, em particular @code{plotdf}, podem possivelmente disparar um erro se
erminarem com ponto e v@'irgula e n@~ao com um sinal de d@'olar. Para evitar
problemas, usamos um sinal de d@'olar em todos os exemplos abaixo.
  
@itemize @bullet
@item
Para mostrar o campo de dire@,{c}@~ao da equa@,{c}@~ao diferencial @math{y' = exp(-x) + y} e a solu@,{c}@~ao que vai em toda a extens@~ao do intervalo @math{(2, -0.1)}:
@example
(%i1) load("plotdf")$

(%i2) plotdf(exp(-x)+y,[trajectory_at,2,-0.1]);
@end example

@ifnotinfo
@image{../figures/plotdf1,8cm}
@end ifnotinfo

@item
Para obter o campo de dire@,{c}@~ao para a equa@,{c}@~ao @math{diff(y,x) = x - y^2} e a solu@,{c}@~ao com condi@,{c}@~ao inicial @math{y(-1) = 3}, podemos usar o comando:
@example
(%i3) plotdf(x-y^2,[xfun,"sqrt(x);-sqrt(x)"],
          [trajectory_at,-1,3], [direction,forward],
          [yradius,5],[xcenter,6]);
@end example
O gr@'afico tamb@'em mostra a fun@,{c}@~ao @math{y = sqrt(x)}. 

@ifnotinfo
@image{../figures/plotdf2,8cm}
@end ifnotinfo

@item
O seguinte exemplo mostra o campo de dire@,{c}@~ao de um oscilador harm@^onico,
definido pelas duas equa@,{c}@~oes @math{dx/dt = y} e @math{dy/dt = -k*x/m},
e a curva integral em todo o intervalo @math{(x,y) = (6,0)}, com um bot@~ao de deslizamento que
ir@'a permitir a voc@^e mudar o valor de @math{m} interativamente (@math{k} est@'a
fixado em 2):
@example
(%i4) plotdf([y,-k*x/m],[parameters,"m=2,k=2"],
            [sliders,"m=1:5"], [trajectory_at,6,0]);
@end example

@ifnotinfo
@image{../figures/plotdf3,8cm}
@end ifnotinfo

@item
Para montar o gr@'afico do campo de dire@,{c}@~ao da equa@,{c}@~ao de Duffing, @math{m*x''+c*x'+k*x+b*x^3 = 0}, introduzimos a vari@'avel @math{y=x'} e usamos:
@example
(%i5) plotdf([y,-(k*x + c*y + b*x^3)/m],
              [parameters,"k=-1,m=1.0,c=0,b=1"],
              [sliders,"k=-2:2,m=-1:1"],[tstep,0.1]);
@end example

@ifnotinfo
@image{../figures/plotdf4,8cm}
@end ifnotinfo

@item
O campo de dire@,{c}@~ao para um p@^edulo amortecido, incluindo a
solu@,{c}@~ao para as condi@,{c}@~oes iniciais fornecidas, com um bot@~ao de deslizamento que
pode ser usado para mudar o valor da massa @math{m}, e com um gr@'afico das
duas  vari@'aveis de estado como uma fun@,{c}@~ao do tempo:

@example
(%i6) plotdf([y,-g*sin(x)/l - b*y/m/l],
         [parameters,"g=9.8,l=0.5,m=0.3,b=0.05"],
         [trajectory_at,1.05,-9],[tstep,0.01],
         [xradius,6],[yradius,14],
         [xcenter,-4],[direction,forward],[nsteps,300],
         [sliders,"m=0.1:1"], [versus_t,1]);
@end example

@ifnotinfo
@image{../figures/plotdf5,8cm}@image{../figures/plotdf6,8cm}
@end ifnotinfo

@end itemize

@end deffn

